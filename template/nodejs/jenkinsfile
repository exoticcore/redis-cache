pipeline {
    environment {
        registry = ""
        registryCredential = ""
        dockerImage = ''
    }
    agent any

    stages {
        stage('Unit Test') {
            steps {
                echo 'Running Unit Test'
            }
        }
        stage('Integration Test') {
            steps {
                echo 'Running Integration Test'
            }
        }
        stage('End to End Test') {
            steps {
                echo 'Running End to End Test'
            }
        }
        stage('SonarQube Analysis') {
            steps {
                echo 'Running SonarQube Analysis'
            }
        }
        stage('Build Artifact') {
            steps {
                dir('template/nodejs') {
                    dockerImage = docker.build("nodejs")
                }
            }
        }
        // stage('Build Docker Image') {
        //     steps {
        //         dir('template/nodejs') {
        //             dockerImage = docker.build("${registry}:$BUILD_NUMBER")
        //         }
        //     }
        // }
    }
}