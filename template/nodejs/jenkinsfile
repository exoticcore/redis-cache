pipeline {
    environment {
        registry = "asia-southeast1-docker.pkg.dev/sc-spark/sc-spark-repository"
        registryCredential = ""
        dockerImage = ''
    }
    agent any

   stages {
        stage('Change Directory') {
            steps {
                dir('template/nodejs') {
                    script {
                        pipeline {
                            stages {
                                stage('Unit Test') {
                                    steps {
                                        echo 'Unit Test'
                                    }
                                }
                                stage('Integration Test') {
                                    steps {
                                        echo 'Integration Test'
                                    }
                                }
                                stage('End to End Test') {
                                    steps {
                                        echo 'End to End Test'
                                    }
                                }
                                stage('SonarQube analysis') {
                                    steps {
                                        echo 'SonarQube analysis'
                                    }
                                }
                                stage('Build Image') {
                                    steps {
                                        sh 'ls -la'
                                    }
                                }
                                stage('Push Image') {
                                    steps {
                                        echo '${registry}'
                                    }
                                }
                                stage('Remove Image') {
                                    steps {
                                        echo 'Remove Image'
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
   }
}